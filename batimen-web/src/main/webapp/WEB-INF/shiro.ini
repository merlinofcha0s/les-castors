# =======================
# Shiro INI configuration
# =======================

[main]
# Objects and their properties are defined here, 
# Such as the securityManager, Realms and anything
# else needed to build the SecurityManager

#Configuration de recupération des users
castorCredentialMatcher = fr.batimen.web.app.security.CastorCredentialMatcher
#Configuration du realm
castorRealm = fr.batimen.web.app.security.CastorRealm
castorRealm.credentialsMatcher = $castorCredentialMatcher
castorRealm.authenticationCachingEnabled = true
castorRealm.authorizationCachingEnabled = true 

sessionManager = org.apache.shiro.web.session.mgt.DefaultWebSessionManager
securityManager.sessionManager = $sessionManager
#Expiration de la session
# 3,600,000 milliseconds = 1 hour
securityManager.sessionManager.globalSessionTimeout = 3600000
#securityManager.sessionManager.sessionIdCookie.maxAge = 2880000
#securityManager.sessionManager.sessionIdCookie.domain = lescastors.fr

#Configuring EHCache
sessionDAO = org.apache.shiro.session.mgt.eis.EnterpriseCacheSessionDAO
securityManager.sessionManager.sessionDAO = $sessionDAO
cacheManager = org.apache.shiro.cache.ehcache.EhCacheManager
securityManager.cacheManager = $cacheManager

#Authorization
authc.loginUrl = /interdit
roles.unauthorizedUrl = /interdit
anyofroles = fr.batimen.web.app.security.AnyOfRolesAuthorizationFilter

[users]
# The 'users' section is for simple deployments
# when you only need a small number of statically-defined 
# set of User accounts.

[roles]
# The 'roles' section is for simple deployments
# when you only need a small number of statically-defined
# roles.

[urls]
# The 'urls' section is used for url-based security
# in web applications.  We'll discuss this section in the
# Web documentation
/mesannonces/** = authc, roles[particulier]
/profil/** = authc, roles[particulier]
/modifiermonprofil/** = authc, anyofroles["particulier,partenaire,admin"]
/annonce/** = authc, anyofroles["particulier,partenaire,admin"]